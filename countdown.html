<!doctype html>
<html>
<head>
  <meta charset="utf-8"/>
  <title>Countdown</title>
  <link rel="stylesheet" href="style.css"/>
  <meta property="og:image" content="" id="ogimg"/>
</head>
<body>
  <div id="card">
    <img id="photo"/>
    <h1 id="names"></h1>
    <h2 id="timer"></h2>
  </div>

  <script>
  const slug = location.hash.slice(1);
  const { names, date, img } = JSON.parse(localStorage.getItem(slug) || "{}");
  document.getElementById("photo").src = img;
  document.getElementById("names").textContent = names;
  document.getElementById("ogimg").content = img;

  function tick() {
    const diff = new Date(date) - new Date();
    const d = Math.floor(diff / 864e5);
    const h = Math.floor((diff % 864e5) / 36e5);
    const m = Math.floor((diff % 36e5) / 6e4);
    document.getElementById("timer").textContent = `${d}d ${h}h ${m}m`;
    requestAnimationFrame(tick);
  }
  tick();
  </script>
</body>
</html>
